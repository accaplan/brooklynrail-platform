{{ define "styles" }}
  {{- printf "material/dist/%s/styles.css" .Type | relURL -}}
{{ end }}

{{ define "header" }}
  {{- .Render "header" -}}
{{ end }}


{{ define "main" }}

<main class="page h-event" id="main-content" role="main">
  <article>

    {{- if .Page.Params.nav.project -}}
    <nav class="main-nav">
      <div class="grid-container grid-container-desktop">
        <div class="grid-row">
          <div class="grid-col-12">
            <div class="nav">
              <ul>
                <li class="issue-select">
                  <select action="" name="issue" onchange="location = this.options[this.selectedIndex].value;">
                    <option selected="selected" value="/2020/06/">JUNE 2020</option>
                    <option value="/2020/05/">MAY 2020</option>
                    <option value="/2020/04/">APRIL 2020</option>
                    <option value="/2020/03/">MAR 2020</option>
                    <option value="/2020/02/">FEB 2020</option>
                    <option value="/2019/12/">DEC 19-JAN 20</option>
                    <option value="/2019/11/">NOV 2019</option>
                    <option value="/2019/10/">OCT 2019</option>
                    <option value="/special/River_Rail_Colby/">River Rail Colby</option>
                    <option value="/2019/09/">SEPT 2019</option>
                    <option value="/2019/07/">JUL-AUG 2019</option>
                    <option value="/2019/06/">JUNE 2019</option>
                    <option value="/2019/05/">MAY 2019</option>
                    <option value="/2019/04/">APR 2019</option>
                    <option value="/2019/03/">MAR 2019</option>
                    <option value="/2019/02/">FEB 2019</option>
                    <option value="/2018/12/">DEC 18-JAN 19</option>
                    <option value="/2018/11/">NOV 2018</option>
                    <option value="/2018/10/">OCT 2018</option>
                    <option value="/2018/09/">SEPT 2018</option>
                    <option value="/2018/07/">JUL-AUG 2018</option>
                    <option value="/2018/06/">JUNE 2018</option>
                    <option value="/2018/05/">MAY 2018</option>
                    <option value="/2018/04/">APR 2018</option>
                    <option value="/2018/03/">MAR 2018</option>
                    <option value="/2018/02/">FEB 2018</option>
                    <option value="/special/RIVER_RAIL/">RIVER RAIL</option>
                    <option value="/2017/12/">DEC 17-JAN 18</option>
                    <option value="/2017/11/">NOV 2017</option>
                    <option value="/2017/10/">OCT 2017</option>
                    <option value="/2017/09/">SEPT 2017</option>
                    <option value="/2017/07/">JUL-AUG 2017</option>
                    <option value="/special/I_LOVE_JOHN_GIORNO/">I LOVE JOHN GIORNO</option>
                    <option value="/2017/06/">JUNE 2017</option>
                    <option value="/2017/05/">MAY 2017</option>
                    <option value="/2017/04/">APR 2017</option>
                    <option value="/2017/03/">MAR 2017</option>
                    <option value="/2017/02/">FEB 2017</option>
                    <option value="/2016/12/">DEC 16-JAN 17</option>
                    <option value="/2016/11/">NOV 2016</option>
                    <option value="/2016/10/">OCT 2016</option>
                    <option value="/2016/09/">SEPT 2016</option>
                    <option value="/2016/07/">JUL-AUG 2016</option>
                    <option value="/2016/06/">JUNE 2016</option>
                    <option value="/2016/05/">MAY 2016</option>
                    <option value="/2016/04/">APR 2016</option>
                    <option value="/2016/03/">MAR 2016</option>
                    <option value="/2016/02/">FEB 2016</option>
                    <option value="/2015/12/">DEC 15-JAN 16</option>
                    <option value="/2015/11/">NOV 2015</option>
                    <option value="/2015/10/">OCT 2015</option>
                    <option value="/2015/09/">SEPT 2015</option>
                    <option value="/2015/07/">JUL-AUG 2015</option>
                    <option value="/2015/06/">JUNE 2015</option>
                    <option value="/2015/05/">MAY 2015</option>
                    <option value="/2015/04/">APR 2015</option>
                    <option value="/2015/03/">MAR 2015</option>
                    <option value="/2015/02/">FEB 2015</option>
                    <option value="/2014/12/">DEC 14-JAN 15</option>
                    <option value="/2014/11/">NOV 2014</option>
                    <option value="/2014/10/">OCT 2014</option>
                    <option value="/2014/09/">SEPT 2014</option>
                    <option value="/2014/07/">JUL-AUG 2014</option>
                    <option value="/2014/06/">JUNE 2014</option>
                    <option value="/2014/05/">MAY 2014</option>
                    <option value="/special/ART_CRIT_EUROPE/">ART CRIT EUROPE</option>
                    <option value="/2014/04/">APR 2014</option>
                    <option value="/2014/03/">MAR 2014</option>
                    <option value="/2014/02/">FEB 2014</option>
                    <option value="/special/AD_REINHARDT/">AD REINHARDT</option>
                    <option value="/2013/12/">DEC 13-JAN 14</option>
                    <option value="/2013/11/">NOV 2013</option>
                    <option value="/2013/10/">OCT 2013</option>
                    <option value="/2013/09/">SEPT 2013</option>
                    <option value="/2013/07/">JUL-AUG 2013</option>
                    <option value="/2013/06/">JUNE 2013</option>
                    <option value="/2013/05/">MAY 2013</option>
                    <option value="/2013/04/">APR 2013</option>
                    <option value="/2013/03/">MAR 2013</option>
                    <option value="/2013/02/">FEB 2013</option>
                    <option value="/2012/12/">DEC 12-JAN 13</option>
                    <option value="/2012/11/">NOV 2012</option>
                    <option value="/2012/10/">OCT 2012</option>
                    <option value="/2012/09/">SEPT 2012</option>
                    <option value="/2012/08/">JUL-AUG 2012</option>
                    <option value="/2012/06/">JUNE 2012</option>
                    <option value="/2012/05/">MAY 2012</option>
                    <option value="/2012/04/">APR 2012</option>
                    <option value="/2012/03/">MAR 2012</option>
                    <option value="/2012/02/">FEB 2012</option>
                    <option value="/2011/12/">DEC 11-JAN 12</option>
                    <option value="/2011/11/">NOV 2011</option>
                    <option value="/2011/10/">OCT 2011</option>
                    <option value="/2011/09/">SEPT 2011</option>
                    <option value="/2011/07/">JUL-AUG 2011</option>
                    <option value="/2011/06/">JUNE 2011</option>
                    <option value="/2011/05/">MAY 2011</option>
                    <option value="/2011/04/">APR 2011</option>
                    <option value="/2011/03/">MAR 2011</option>
                    <option value="/2011/02/">FEB 2011</option>
                    <option value="/2010/12/">DEC 10-JAN 11</option>
                    <option value="/2010/11/">NOV 2010</option>
                    <option value="/2010/10/">OCT 2010</option>
                    <option value="/2010/09/">SEPT 2010</option>
                    <option value="/2010/07/">JUL-AUG 2010</option>
                    <option value="/2010/06/">JUNE 2010</option>
                    <option value="/2010/05/">MAY 2010</option>
                    <option value="/2010/04/">APR 2010</option>
                    <option value="/2010/03/">MAR 2010</option>
                    <option value="/2010/02/">FEB 2010</option>
                    <option value="/2009/12/">DEC 09-JAN 10</option>
                    <option value="/2009/11/">NOV 2009</option>
                    <option value="/2009/10/">OCT 2009</option>
                    <option value="/2009/09/">SEPT 2009</option>
                    <option value="/2009/07/">JUL-AUG 2009</option>
                    <option value="/2009/06/">JUNE 2009</option>
                    <option value="/2009/05/">MAY 2009</option>
                    <option value="/2009/04/">APRIL 2009</option>
                    <option value="/2009/03/">MARCH 2009</option>
                    <option value="/2009/02/">FEB 2009</option>
                    <option value="/2008/12/">DEC 08-JAN 09</option>
                    <option value="/2008/11/">NOV 2008</option>
                    <option value="/2008/10/">OCT 2008</option>
                    <option value="/2008/09/">SEPT 2008</option>
                    <option value="/2008/07/">JUL-AUG 2008</option>
                    <option value="/2008/06/">JUN 2008</option>
                    <option value="/2008/05/">MAY 2008</option>
                    <option value="/2008/04/">APR 2008</option>
                    <option value="/2008/03/">MAR 2008</option>
                    <option value="/2008/02/">FEB 2008</option>
                    <option value="/2007/12/">DEC 07-JAN 08</option>
                    <option value="/2007/11/">NOV 2007</option>
                    <option value="/2007/10/">OCT 2007</option>
                    <option value="/2007/09/">SEPT 2007</option>
                    <option value="/2007/07/">JUL-AUG 2007</option>
                    <option value="/2007/06/">JUN 2007</option>
                    <option value="/2007/05/">MAY 2007</option>
                    <option value="/2007/04/">APR 2007</option>
                    <option value="/2007/03/">MAR 2007</option>
                    <option value="/2007/02/">FEB 2007</option>
                    <option value="/2006/12/">DEC 06-JAN 07</option>
                    <option value="/2006/11/">NOV 2006</option>
                    <option value="/2006/10/">OCT 2006</option>
                    <option value="/2006/09/">SEPT 2006</option>
                    <option value="/2006/07/">JUL-AUG 2006</option>
                    <option value="/2006/06/">JUN 2006</option>
                    <option value="/2006/05/">MAY 2006</option>
                    <option value="/2006/04/">APR 2006</option>
                    <option value="/2006/03/">MAR 2006</option>
                    <option value="/2006/02/">FEB 2006</option>
                    <option value="/2005/12/">DEC 05-JAN 06</option>
                    <option value="/2005/11/">NOV 2005</option>
                    <option value="/2005/10/">OCT 2005</option>
                    <option value="/2005/09/">SEPT 2005</option>
                    <option value="/2005/07/">JUL-AUG 2005</option>
                    <option value="/2005/06/">JUN 2005</option>
                    <option value="/2005/05/">MAY 2005</option>
                    <option value="/2005/04/">APR 2005</option>
                    <option value="/2005/03/">MAR 2005</option>
                    <option value="/2005/02/">FEB 2005</option>
                    <option value="/2005/01/">DEC 04-JAN 05</option>
                    <option value="/2004/11/">NOV 2004</option>
                    <option value="/2004/10/">OCT 2004</option>
                    <option value="/2004/09/">SEPT 2004</option>
                    <option value="/2004/07/">JUL-AUG 2004</option>
                    <option value="/2004/06/">JUN 2004</option>
                    <option value="/2004/05/">MAY 2004</option>
                    <option value="/2004/04/">APR 2004</option>
                    <option value="/2004/03/">MAR 2004</option>
                    <option value="/2004/02/">FEB 2004</option>
                    <option value="/2004/01/">DEC 03-JAN 04</option>
                    <option value="/2003/12/">WINTER 2003</option>
                    <option value="/2003/11/">NOV 2003</option>
                    <option value="/2003/10/">OCT 2003</option>
                    <option value="/2003/08/">AUG-SEPT 2003</option>
                    <option value="/2003/07/">SUMMER 03</option>
                    <option value="/2003/06/">JUN-JUL 2003</option>
                    <option value="/2003/04/">APR-MAY 2003</option>
                    <option value="/2002/10/">AUTUMN 2002</option>
                    <option value="/2002/08/">AUG-SEPT 2002</option>
                    <option value="/2002/07/">EARLY SUMMER 2002</option>
                    <option value="/2002/03/">MARCH-APRIL 2002</option>
                    <option value="/2002/01/">JAN-FEB 2002</option>
                    <option value="/2001/10/">OCT-NOV 01</option>
                    <option value="/2001/08/">JULY-AUG 2001</option>
                    <option value="/2001/05/">MAY-JUNE 2001</option>
                    <option value="/2001/02/">FEB-MARCH 2001</option>
                    <option value="/2000/12/">DEC 00-JAN 01</option>
                    <option value="/2000/10/">OCT-NOV 2000</option>
                  </select>
                  {{/* <select class="" name="">
                    <optgroup label="">
                      <option value="">June 2020</option>
                      <option value="">May 2020</option>
                      <option value="">April 2020</option>
                      <option value="">March 2020</option>
                    </optgroup>
                  </select> */}}
                </li>
              {{- $currentNode := . -}}
              {{ range $i, $nav := .Page.Params.nav.project -}}
                <li>
                  <a class="u-black" href="{{- $nav.url -}}" title="{{- $nav.name -}}"><span>{{- $nav.name -}}</span></a>
                </li>
              {{ end }}

                <li class="donate"><a class="u-white" href="/donate" title="Donate to the Brooklyn Rail"><span>Donate</span></a></li>
              </ul>
            </div>
          </div>
        </div>
      </div>
    </nav>
    {{- end -}}

    <header>
      <div class="grid-container grid-container-desktop">
        <div class="grid-row">
          <div class="grid-col-12">

            <h1 class="display-none">
              {{- if .Params.headline -}}
                {{- .Params.headline | markdownify -}}
              {{- else -}}
              {{- .Params.Title | markdownify -}}
              {{- end -}}
            </h1>

            {{- with .Params.Deck -}}
            <div class="deck">
              {{- . | markdownify -}}
            </div>
            {{- end -}}

          </div>
        </div>
      </div>
    </header>

    <section class="all-people">
      <div class="grid-container grid-container-desktop">
        <div class="grid-row">

          <div class="grid-col-12">

            {{- if not .Params.deck -}}
            <p class="summary">{{- .Params.summary | markdownify -}}</p>
            {{- end -}}

            {{- with .Content -}}
            <div class="content">
              {{- . -}}
            </div>
            {{- end -}}
          </div>
        </div>


        <!-- create a list with all uppercase letters -->
        {{ $letters := split "ABCDEFGHIJKLMNOPQRSTUVWXYZ" "" }}

        <div class="grid-row">
          <div class="grid-col-12">
            <div class="letters">
              {{- range $letters -}}
                <a href="#letter_{{ . }}" title="Go to letter {{ . }}">{{ . }}</a>
              {{- end -}}
            </div>
          </div>
        </div>

        <div class="grid-row grid-gap-3">


          {{/* Gets the data from the file in /data */}}
          {{- $wti_data := $.Site.Data.wti_data -}}

          {{/* Loops over each item in the data */}}
          {{- range $i, $person := sort $wti_data "last_name" -}}

            <!-- get the first character of each title. Assumes that the title is never empty! -->
            {{ $firstChar := substr $person.last_name 0 1 | upper }}

            <!-- in case $firstChar is a letter -->
            {{ if $firstChar | in $letters }}
              <!-- get the current letter -->
              {{ $curLetter := $.Scratch.Get "curLetter" }}
              <!-- if $curLetter isn't set or the letter has changed -->
              {{ if ne $firstChar $curLetter }}
              <!-- update the current letter and print it -->
                {{ $.Scratch.Set "curLetter" $firstChar }}

                <div class="grid-col-12 tablet:grid-col-3">
                  <div class="letter" id="letter_{{- $firstChar -}}">
                    <a href="#letter_{{- $firstChar -}}">{{- $firstChar -}}</a>
                  </div>
                </div>

              {{ end }}
            {{ end }}

            {{ $filename := "" }}
            {{- if $person.filename -}}
              {{- $filename = (print "" $person.filename) -}}
            {{- else -}}
              {{ $last_name := replace $person.last_name "''" "_" }}
              {{ $last_name = replace $last_name " " "_" }}
              {{ $last_name = replaceRE "[*,.']" "" $last_name }}
              {{ $first_name := replace $person.first_name " " "_" }}
              {{ $first_name = replaceRE "[*()]" "" $first_name }}
              {{- $filename = printf "%s_%s%s" $first_name $last_name ".jpg" -}}

            {{- end -}}

            {{- with $.Resources.Match $filename -}}
              {{- range . -}}
                {{- template "wti_person" (dict "image" .RelPermalink "size" "sm" "format" "square" "person" $person "url" $person.wikipedia_url ) -}}
              {{- end -}}
            {{- end -}}




          {{- end -}}
        </div>

        {{/* {{- .Render "wikipedia_data" -}} */}}


      </div>
    </section>

  </article>
</main>
{{ end }}



{{/* Template: wti_person ============================ */}}
{{- define "wti_person" -}}

  {{- $size := .size -}}
  {{- $image := .image -}}
  {{- $format := .format -}}
  {{- $person := .person -}}
  {{- $url := .url -}}

  <div class="grid-col-12 tablet:grid-col-3">
    <div class="person">
      {{- template "media" (dict "image" $image "size" "md" "format" "square" "type" "string" ) -}}
      <p>
        {{- if $url -}}
          <a href="{{- $url -}}" title="{{- $person.first_name }} {{ $person.last_name -}}">{{- $person.first_name }} {{ $person.last_name -}}</a>
        {{- else -}}
          {{- $person.first_name }} {{ $person.last_name -}}
        {{- end -}}
        <br/>{{- $person.origin }}
        <br/>{{- $person.born_year }}
      </p>
    </div>
  </div>

{{- end -}}

{{ define "scripts" }}
  {{- .Render "scripts" -}}
{{ end }}
