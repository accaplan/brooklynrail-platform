{{/*
Donate Shortcode
{{< donate placeholder="25" value="25" >}}
*/}}

{{/* Gets the `media` data from the image shortcode */}}
{{- $heading := (.Get "heading" | markdownify) -}}
{{- $placeholder := (.Get "placeholder") -}}
{{- $value := (.Get "value") -}}

<div class="shortcode-donate shortcode-donate-sm">

  <form class="rail-form" id="donate-form">
    <fieldset>
      
      <div class="options">
        <button class="amount" data-amount="25.00">$25</button>
        <button class="amount" data-amount="50.00">$50</button>
        <button class="amount" data-amount="100.00">$100</button>
        <button class="amount" data-amount="500.00">$500</button>
        <button class="amount" data-amount="1000.00">$1,000</button>
        <button class="amount" data-amount="10000.00">$10,000 +</button>
      </div>

      <div class="fields">
        {{- if $heading -}}
          <legend>{{- $heading -}}</legend>
        {{- else -}}
          <legend class="hidden">Donate to the Rail</legend>
        {{- end -}}

        <div class="group">
          <div class="field">
            <label for="donate-amount">Choose your amount</label>
            <div class="prefix">
              <span>$</span>
              <input required type="number" placeholder="{{- if $placeholder -}}{{- $placeholder -}}{{- else -}}250{{- end -}}" name="amount" id="donate-amount" pattern="^\d+(?:\.\d{1,2})?$" title="Currency" min="0" value="" step="0.01" />
            </div>
            <div class="usa-checkbox transaction-fee-checkbox">
              <input class="usa-checkbox__input" id="transaction-fee" type="checkbox" name="donation_types" value="" data-fee="">
              <label class="usa-checkbox__label" for="transaction-fee">Include the <span>$0.00</span> processing fee?</label>
            </div>
          </div>
        </div>
        <div class="group hidden">
          <div class="field">
            <label for="donate-type">Tell us which projects inspired you to donate</label>
            {{- $donation_types := $.Site.Data.donation_types -}}
            {{- range $donation_types -}}
              <div class="usa-checkbox">
                <input class="usa-checkbox__input" id="check-{{- .id -}}" type="checkbox" name="donation_types" value="{{- .id -}}">
                <label class="usa-checkbox__label" for="check-{{- .id -}}">{{- .type -}}</label>
              </div>
            {{- end -}}
          </div>
        </div>
        <div class="group">
          <div class="field">
            <div class="btn-helper">
              <button class="btn btn-md" type="button" id="btn-donate" disabled><span>Donate</span></button>
            </div>
          </div>
        </div>
        
      </div>
      <p class="helper"></p>

      

    </fieldset>
  </form>
  <div class="content"><p><strong>Or skip the fees mail a check to:</strong>
    <pre>The Brooklyn Rail
253 36th Street, 3rd Floor, Suite C304
Brooklyn, NY 11232
Mailbox 20</pre></p></div>
  <div class="content terms">
    <p>The Brooklyn Rail is a nonprofit 501(c)(3) organization. Your donation is fully deductible. Questions? Email <a
    href="mailto:donate@brooklynrail.org" title="email the Brooklyn Rail">donate@brooklynrail.org</a> ❤️</p>
  </div>
  
</div>

{{- define "custom_js" }}
  <script src="https://js.stripe.com/v3/"></script>

  {{ $donate_js := (resources.Get "js/donate.js" | js.Build "material/dist/donate.js" | resources.Fingerprint "sha512") -}}
  <script src="{{- $donate_js.RelPermalink -}}" {{ printf "integrity=%q" $donate_js.Data.Integrity | safeHTMLAttr }} ></script>
  {{/* <script src="{{- "material/dist/signup.js" | relURL -}}"></script> */}}
{{- end -}}
